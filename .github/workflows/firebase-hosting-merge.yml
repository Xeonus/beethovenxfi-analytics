# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
'on':
  push:
    branches:
      - main
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    env:
      CI: false
      GENERATE_SOURCEMAP: false
      REACT_APP_WALLETCONNECT_BRIDGE_URL: "https://uniswap.bridge.walletconnect.org"
      REACT_APP_BALANCER_SUBGRAPH_START_TIMESTAMP: 1633392000
      REACT_APP_BALANCER_SUBGRAPH_OP_START_TIMESTAMP: 1654034400
      REACT_APP_SUBGRAPH_URL: "https://api.thegraph.com/subgraphs/name/beethovenxfi/beethovenx-v2-fantom"
      REACT_APP_SUBGRAPH_URL_STELLATE: "https://api.thegraph.com/subgraphs/name/beethovenxfi/beethovenx-v2-fantom"
      REACT_APP_OP_SUBGRAPH_URL: "https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-optimism-v2"
      REACT_APP_OP_SUBGRAPH_URL_STELLATE: "https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-optimism-v2"
      REACT_APP_BLOCKS_SUBGRAPH_URL: "https://api.thegraph.com/subgraphs/name/publu/fantom-blocks"
      REACT_APP_OP_BLOCKS_SUBGRAPH_URL: "https://api.thegraph.com/subgraphs/name/danielmkm/optimism-blocks"
      REACT_APP_FTM_TOKEN_CLIENT: "https://backend-v3.beets-ftm-node.com/"
      REACT_APP_OP_TOKEN_CLIENT: "https://backend-v3.beets-ftm-node.com/"
      REACT_APP_DOCS_LINK: "https://docs.beets.fi/"
      REACT_APP_APP_LINK: "https://beets.fi/"
      REACT_APP_APP_OP_LINK: "https://op.beets.fi/"
      REACT_APP_PROJECT_NAME: "Beethoven X"
      REACT_APP_SITE_TITLE: "Beethoven X Analytics"
      REACT_APP_SITE_DESCRIPTION: "Your spiritually symphonic decentralized investment platform"
      REACT_APP_PRIMARY_COLOR: "#00E59D"
      REACT_APP_SECONDARY_COLOR: "#FF0000"
      REACT_APP_APP_LOGO: "https://beethoven-assets.s3.eu-central-1.amazonaws.com/apple-touch-192.png"
      REACT_APP_LOADING_IMAGE: "https://beethoven-assets.s3.eu-central-1.amazonaws.com/looking-image.png"
      REACT_APP_APPLE_TOUCH_192: "https://beethoven-assets.s3.eu-central-1.amazonaws.com/apple-touch-192.png"
      REACT_APP_APPLE_TOUCH_512: "https://beethoven-assets.s3.eu-central-1.amazonaws.com/apple-touch-512.png"
      REACT_APP_SOCIAL_IMAGE: "https://beethoven-assets.s3.eu-central-1.amazonaws.com/social-image.png"
      REACT_APP_FAVICON: "https://beethoven-assets.s3.eu-central-1.amazonaws.com/favicon.ico"
      REACT_APP_MANIFEST: "https://beethoven-assets.s3.eu-central-1.amazonaws.com/manifest.json"
      REACT_APP_INFURA_KEY: '${{ secrets.REACT_APP_INFURA_KEY }}'
      REACT_APP_NETWORK_URL: '${{ secrets.REACT_APP_NETWROK_URL }}'
      REACT_APP_DB_KEY: '${{ secrets.REACT_APP_DB_KEY }}'
    strategy:
      matrix:
        node-version: [ 16.x ]
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v2
        with:
          node-version: ${{ matrix.node-version }}
      - run: yarn install
      - run: yarn build
      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: '${{ secrets.GITHUB_TOKEN }}'
          firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_BEETHOVENXFI_ANALYTICS }}'
          channelId: live
          projectId: beethovenxfi-analytics
          firebaseToolsVersion: 12.7.0
